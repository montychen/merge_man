<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        .container {
            display: flex;
            width: 100%;
            height: 100vh;
        }

        .left-column {
            flex: 0.7;
            display: flex;
            flex-direction: column;
        }

        .image-group {
            display: flex;
            gap: 1rem;
        }

        .image-option {
            cursor: pointer;
            position: relative;
        }

        .image-option input[type="radio"] {
            display: none;
        }

        .image-option img {
            width: 50px;
            height: 50px;
            object-fit: cover;
        }

        .image-option label:before {
            content: "";
            display: inline-block;
            width: 50px;
            height: 50px;
            background-color: transparent;
            border: 1px solid #ccc;
        }

        .image-option input[type="radio"]:checked+label img {
            opacity: 1;
        }

        .image-option input[type="radio"]:checked+label:before {
            background-color: lightblue;
        }

        .group-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .button-row {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
        }

        .right-column {
            flex: 0.3;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="left-column">
            <div class="image-group">
                <div class="group-title">图片组一</div>
                <div class="image-option">
                    <input type="radio" id="img1-1" name="group1" checked />
                    <label for="img1-1"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 1" /></label>
                </div>
                <div class="image-option">
                    <input type="radio" id="img1-2" name="group1" />
                    <label for="img1-2"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 2" /></label>
                </div>
                <div class="image-option">
                    <input type="radio" id="img1-3" name="group1" />
                    <label for="img1-3"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 3" /></label>
                </div>
                <div class="image-option">
                    <input type="radio" id="img1-4" name="group1" />
                    <label for="img1-4"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 4" /></label>
                </div>
                <div class="image-option">
                    <input type="radio" id="img1-5" name="group1" />
                    <label for="img1-5"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 5" /></label>
                </div>
            </div>
            <div class="image-group">
                <div class="group-title">图片组二</div>
                <div class="image-option">
                    <input type="radio" id="img2-1" name="group2" checked />
                    <label for="img2-1"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 1" /></label>
                </div>
                <div class="image-option">
                    <input type="radio" id="img2-2" name="group2" />
                    <label for="img2-2"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 2" /></label>
                </div>
                <div class="image-option">
                    <input type="radio" id="img2-3" name="group2" />
                    <label for="img2-3"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 3" /></label>
                </div>
                <div class="image-option">
                    <input type="radio" id="img2-4" name="group2" />
                    <label for="img2-4"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 4" /></label>
                </div>
                <div class="image-option">
                    <input type="radio" id="img2-5" name="group2" />
                    <label for="img2-5"><img src="http://127.0.0.1:8000/static/res/头/19_head.png"
                            alt="Option 5" /></label>
                </div>
            </div>
            <div class="button-row">
                <button id="submit-btn">提交</button>
                <button id="save-btn">保存</button>
            </div>
        </div>
        <div class="right-column">
            <img id="result-image" src="http://127.0.0.1:8000/static/img/girl.png" alt="Initial Image"
                style="max-width: 100%; height: auto;">
        </div>

        <script>
            document.getElementById("submit-btn").addEventListener("click", function () {
                const selectedGroup1 = document.querySelector('input[name="group1"]:checked').id.slice(-1);
                const selectedGroup2 = document.querySelector('input[name="group2"]:checked').id.slice(-1);

                // 发送 AJAX 请求...
                const xhr = new XMLHttpRequest();
                xhr.open("POST", "http://127.0.0.1:8000/merge", true);
                xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

                const data = JSON.stringify({
                    group1Choice: parseInt(selectedGroup1),
                    group2Choice: parseInt(selectedGroup2)
                });

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                        console.log("Data submitted successfully");

                        // 更新右侧区域的图片
                        const resultImage = document.getElementById("result-image");
                        resultImage.src = "http://127.0.0.1:8000/static/img/man.png"; // 更改图片源地址
                        resultImage.alt = "Updated Image";
                    }
                };

                xhr.send(data);
            });
        </script>
</body>

</html>
